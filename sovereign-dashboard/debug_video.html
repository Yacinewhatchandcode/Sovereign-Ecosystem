<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>üîç Video Debug - Simple Test</title>
    <style>
        body {
            background: #000;
            color: #0ff;
            font-family: monospace;
            padding: 20px;
        }

        .test {
            border: 2px solid #0ff;
            padding: 20px;
            margin: 20px 0;
        }

        video {
            border: 2px solid #f0f;
            display: block;
            margin: 10px 0;
        }
    </style>
</head>

<body>
    <h1>üîç SIMPLE VIDEO TEST</h1>

    <div class="test">
        <h2>Test 1: Direct video tag (base loop)</h2>
        <video width="200" controls autoplay loop muted>
            <source src="/assets/bg-loop.mp4" type="video/mp4">
            VIDEO NOT SUPPORTED
        </video>
        <p id="status1">Waiting...</p>
    </div>

    <div class="test">
        <h2>Test 2: Agent stream (scanner)</h2>
        <video width="200" controls autoplay loop muted>
            <source src="/outputs/agent_streams/scanner/idle_stream.mp4" type="video/mp4">
            VIDEO NOT SUPPORTED
        </video>
        <p id="status2">Waiting...</p>
    </div>

    <div class="test">
        <h2>Test 3: Round avatar style</h2>
        <div style="width: 100px; height: 100px; border-radius: 50%; overflow: hidden; border: 2px solid #0ff;">
            <video width="100" height="100" autoplay loop muted playsinline style="object-fit: cover;">
                <source src="/outputs/agent_streams/azirem/idle_stream.mp4" type="video/mp4">
            </video>
        </div>
        <p id="status3">Waiting...</p>
    </div>

    <div class="test">
        <h2>üìä Debug Info</h2>
        <pre id="debug"></pre>
    </div>

    <script>
        // Collect debug info
        const videos = document.querySelectorAll('video');
        const debug = document.getElementById('debug');

        let info = `Total videos found: ${videos.length}\n\n`;

        videos.forEach((v, i) => {
            info += `Video ${i + 1}:\n`;
            info += `  src: ${v.currentSrc || v.src || 'NONE'}\n`;
            info += `  readyState: ${v.readyState}\n`;
            info += `  networkState: ${v.networkState}\n`;
            info += `  error: ${v.error ? v.error.message : 'none'}\n\n`;

            v.addEventListener('loadeddata', () => {
                document.getElementById(`status${i + 1}`).textContent = '‚úÖ VIDEO LOADED!';
                document.getElementById(`status${i + 1}`).style.color = '#0f0';
            });

            v.addEventListener('error', (e) => {
                document.getElementById(`status${i + 1}`).textContent = `‚ùå ERROR: ${v.error.message}`;
                document.getElementById(`status${i + 1}`).style.color = '#f00';
                console.error('Video error:', v.error);
            });

            v.addEventListener('canplay', () => {
                document.getElementById(`status${i + 1}`).textContent += ' (Can play)';
            });
        });

        debug.textContent = info;

        // Try to play all videos
        setTimeout(() => {
            videos.forEach(v => {
                v.play().catch(e => console.error('Play error:', e));
            });
        }, 1000);
    </script>
</body>

</html>